<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>TicTacToe Game</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <style>
.grid-container 
{
  display: grid;
  grid-template-columns: auto auto auto;
  background-color: #2196F3;
  padding: 10px;
}
.grid-item 
{
  background-color: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(0, 0, 0, 0.8);
  padding: 20px;
  font-size: 30px;
  text-align: center;
}
button
{
margin: 1em;
font-size: 2em;
     visibility: visible;   
}
label
{
    font-size: 2em;
}

#playerWins
{
    font-size: 3em;
    color: red;
}
    </style>
    
    </head>
    <h1>TicTacToe</h1>
    <h2>Abwechseln auf ein leeres Feld klicken!</h2>
    <body>
        <div class="grid-container">
            <div id = "field1" class="grid-item" onclick="setField(0)">-</div>
            <div id = "field2"class="grid-item" onclick="setField(1)">-</div>
            <div id = "field3" class="grid-item" onclick="setField(2)">-</div>
            <div id = "field4" class="grid-item" onclick="setField(3)">-</div>
            <div id = "field5" class="grid-item" onclick="setField(4)">-</div>
            <div id = "field6" class="grid-item" onclick="setField(5)">-</div>
            <div id = "field7" class="grid-item" onclick="setField(6)">-</div>
            <div id = "field8" class="grid-item" onclick="setField(7)">-</div>
            <div id = "field9" class="grid-item" onclick="setField(8)">-</div>
        </div>
        <button id="btn-newGame">Neues Spiel</button>
        <label id="player">Player 1 ist am zug</label><br>
        <label id="playerWins"></label>

    </body>

    <script>
    var field = -1;
    var fieldArray = []; 
    var emptyField = "-"; 
    var count = 0;  
    var gameEnds = false;
    var player;
    const player1Sign = "X";
    const player2Sign = "O";

    $(function()
    {
        setNewGame(); 
    })

    $("#btn-newGame").click(function()
    {
        setNewGame();
    });
        function setNewGame()
        {
            count = 0;
            getPlayerIstAmZug();
            gameEnds = false;
            $("#playerWins").css("visibility", "hidden");

            document.getElementById("field1").innerHTML = emptyField; 
            document.getElementById("field2").innerHTML = emptyField;   
            document.getElementById("field3").innerHTML = emptyField;   
            document.getElementById("field4").innerHTML = emptyField;   
            document.getElementById("field5").innerHTML = emptyField;   
            document.getElementById("field6").innerHTML = emptyField;   
            document.getElementById("field7").innerHTML = emptyField;   
            document.getElementById("field8").innerHTML = emptyField;   
            document.getElementById("field9").innerHTML = emptyField; 
            
            for(var i = 0; i < 9; i++)
            {
                fieldArray[i] = emptyField;
            }
        };

    function setField(number, value)
    {
        if(gameEnds)
        {
            alert("Spiel ist beendet. Bitte Neues Spiel klicken!");
            return;
        }

        if(count % 2 == 0)
        {
            value = player1Sign;
            player = " 1 ";
        }else
        {
           value = player2Sign  ;
           player = " 2 ";
        }
        
        field = number;
        if(field == 0)
        {
            if(fieldArray[0] != emptyField)
            {
                alert("Nur auf leere Felder klicken!")
                return;
            }
            
            document.getElementById("field1").innerHTML = value; 
            fieldArray[0] = value;  
        }
        else if(field == 1)
        {
            if(fieldArray[1] != emptyField)
            {
                alert("Nur auf leere Felder klicken!")
                return;
            }
            
            document.getElementById("field2").innerHTML = value; 
            fieldArray[1] = value;   
        }
        else if(field == 2)
        {   
            if(fieldArray[2] != emptyField)
            {
                alert("Nur auf leere Felder klicken!")
                return;
            }
            
            document.getElementById("field3").innerHTML = value;
            fieldArray[2] = value;    
        }
        else if(field == 3)
        {
            if(fieldArray[3] != emptyField)
            {
                alert("Nur auf leere Felder klicken!")
                return;
            }

            document.getElementById("field4").innerHTML = value;
            fieldArray[3] = value;    
        }
        else if(field == 4)
        {
            if(fieldArray[4] != emptyField)
            {
                alert("Nur auf leere Felder klicken!")
                return;
            }
            
            document.getElementById("field5").innerHTML = value;
            fieldArray[4] = value;    
        }
        else if(field == 5)
        {
            if(fieldArray[5] != emptyField)
            {
                alert("Nur auf leere Felder klicken!")
                return;
            }
            
            document.getElementById("field6").innerHTML = value;
            fieldArray[5] = value;    
        }
        else if(field == 6)
        {
            if(fieldArray[6] != emptyField)
            {
                alert("Nur auf leere Felder klicken!")
                return;
            }
            
            document.getElementById("field7").innerHTML = value; 
            fieldArray[6] = value;   
        }
        else if(field == 7)
        {
            if(fieldArray[7] != emptyField)
            {
                alert("Nur auf leere Felder klicken!")
                return;
            }
            
            document.getElementById("field8").innerHTML = value; 
            fieldArray[7] = value;   
        }
        else if(field == 8)
        {
            if(fieldArray[8] != emptyField)
            {
                alert("Nur auf leere Felder klicken!")
                return;
            }
            
            document.getElementById("field9").innerHTML = value; 
            fieldArray[8] = value;   
        } 
        checkIfPlayerWinns();
        count++;
        
        //document.getElementById("player").innerHTML = "Player"+ player+ "ist am zug"; 
        getPlayerIstAmZug();
        
    };

    function getPlayerIstAmZug()
    {
        if(player == 1)
        {
            player = " 2 ";
        }else
        {
            player = " 1 ";
        }
        
        document.getElementById("player").innerHTML = "Player"+ player+ "ist am zug"; 
    }

    function checkIfPlayerWinns()
    {
        // Zeilen
        var i = 0;
        while(i < 9)
        {
            if(fieldArray[i]== player1Sign && fieldArray[i+1]== player1Sign && fieldArray[i+2] ==player1Sign)
            {
                gameEnds = true;
            }
            else if(fieldArray[i]== player2Sign && fieldArray[i+1]== player2Sign && fieldArray[i+2] ==player2Sign)
            {
                gameEnds = true;
            }
            
            i = i+3;
        };

        // Spalten
        var j = 0;
        while(j < 3)
        {
            if(fieldArray[j]== player1Sign && fieldArray[j+3]== player1Sign && fieldArray[j+6] ==player1Sign)
            {
                gameEnds = true;
            }
            else if(fieldArray[j]== player2Sign && fieldArray[j+3]== player2Sign && fieldArray[j+6] ==player2Sign)
            {
                gameEnds = true;
            }

            j++; 
        };

        // Diagonal
        var k = 0;
        while(k <= 2)
        {
            if(fieldArray[k]== player1Sign && fieldArray[k+4]== player1Sign && fieldArray[8-k] ==player1Sign)
            {
                gameEnds = true;
                //document.getElementById("playerWins").innerHTML = "Player 1 hat gewonnen!"; 
            }
            else if(fieldArray[k]== player2Sign && fieldArray[0+4]== player2Sign && fieldArray[8-k] ==player2Sign)
            {
                gameEnds = true;
                //document.getElementById("playerWins").innerHTML = "Player 2 hat gewonnen!"; 
            }
            
            k = k + 2;
        };

        if(gameEnds)
        {
            document.getElementById("playerWins").innerHTML = "Player" + player + "hat gewonnen!"; 
            $("#playerWins").css("visibility", "visible"); 
        }
    };
    </script>

</html>